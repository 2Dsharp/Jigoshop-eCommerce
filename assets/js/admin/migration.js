jQuery(document).ready(function(i){var o,n,r,t,s;return i("#msgLog").val("1"),n=0,r=3,o=function(o,n){return"success"===n?i(".glyphicon").removeClass("glyphicon-time").addClass("glyphicon-ok"):"danger"===n&&i(".glyphicon").removeClass("glyphicon-time").addClass("glyphicon-remove"),i(".migration-id").html("&nbsp;&nbsp; - &nbsp;&nbsp;"+o),i(".back-to-home").removeClass("invisible"),i("#migration_alert").removeClass("alert-info").addClass("alert-"+n),i("#migration_progress_bar").addClass("progress-bar-"+n)},t=function(s){var a,e;return e=jigoshop_admin_migration,a=i("#msgLog").val(),i.ajax({url:jigoshop.getAjaxUrl(),type:"post",dataType:"json",data:{action:s,msgLog:a}}).done(function(a){return a.success===!0?(i(".migration_processed").html(a.processed),i(".migration_remain").html(a.remain),i(".migration_total").html(a.total),i(".migration-id").html(".".repeat(n)),i("#msgLog").val("2"),n++,n>3&&(n=0),i(".progress_bar").css("width",a.percent+"%").html(a.percent+"%"),a.remain<=0?(o(e.i18n.migration_complete,"success"),!1):t(s)):a.success===!1?0>=r?(o(e.i18n.migration_error,"danger"),console.log(a),alert(e.i18n.alert_msg),!1):(setTimeout(function(){return t(s)},2e3),r--):void 0}).fail(function(i){return console.log(i.responseText),o(e.i18n.migration_error,"danger"),alert(e.i18n.alert_msg),!1})},s=function(o){var n;return n=jigoshop_admin_migration,i(".migration").css("display","none"),i(".migration_progress").css("display","block"),i(".migration_processed").html("0"),i(".migration_remain").html(n.i18n.processing),i(".migration_total").html(n.i18n.processing),i("#title").html(n.i18n[o])},i(".migration-products").click(function(){return s("jigoshop.admin.migration.products"),t("jigoshop.admin.migration.products")}),i(".migration-coupons").click(function(){return s("jigoshop.admin.migration.coupons"),t("jigoshop.admin.migration.coupons")}),i(".migration-emails").click(function(){return s("jigoshop.admin.migration.emails"),t("jigoshop.admin.migration.emails")}),i(".migration-options").click(function(){return s("jigoshop.admin.migration.options"),t("jigoshop.admin.migration.options")}),i(".migration-orders").click(function(){return s("jigoshop.admin.migration.orders"),t("jigoshop.admin.migration.orders")})});