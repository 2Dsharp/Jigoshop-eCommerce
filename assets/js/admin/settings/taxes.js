var TaxSettings,bind=function(t,e){return function(){return t.apply(e,arguments)}};TaxSettings=function(){function t(t){this.params=t,this.updateStateField=bind(this.updateStateField,this),this.addNewRule=bind(this.addNewRule,this),this.addNewClass=bind(this.addNewClass,this),jQuery("#add-tax-class").on("click",this.addNewClass),jQuery("#tax-classes").on("click","button.remove-tax-class",this.removeItem),jQuery("#add-tax-rule").on("click",this.addNewRule),jQuery("#tax-rules").on("click","button.remove-tax-rule",this.removeItem).on("change","select.tax-rule-country",this.updateStateField),this.updateFields()}return t.prototype.params={new_class:"",new_rule:""},t.prototype.removeItem=function(){return jQuery(this).closest("tr").remove(),!1},t.prototype.addNewClass=function(){return jQuery("#tax-classes").append(this.params.new_class),!1},t.prototype.addNewRule=function(){var t;return t=jQuery(this.params.new_rule),jQuery("input.tax-rule-postcodes",t).select2({tags:[],tokenSeparators:[","],multiple:!0,formatNoMatches:""}),jQuery("#tax-rules").append(t),!1},t.prototype.updateStateField=function(t){var e,a,r,s;return a=jQuery(t.target).closest("tr"),r=jQuery("input.tax-rule-states",a),e=jQuery("select.tax-rule-country",a),s=e.val(),null!=this.params.states[s]?this._attachSelectField(r,this.params.states[s]):this._attachTextField(r)},t.prototype.updateFields=function(){return jQuery("select.tax-rule-country").change(),jQuery("input.tax-rule-postcodes").select2({tags:[],tokenSeparators:[","],multiple:!0,formatNoMatches:""})},t.prototype._attachSelectField=function(t,e){return t.select2({data:e,multiple:!0,initSelection:function(t,a){var r,s,n,u,i,l,o;for(r=[],u=t.val().split(","),s=0,n=u.length;n>s;s++)o=u[s],l=function(){var t,a,r;for(r=[],t=0,a=e.length;a>t;t++)i=e[t],i.id===o&&r.push(i);return r}(),r.push(l[0]);return a(r)}})},t.prototype._attachTextField=function(t){return t.select2("destroy")},t}(),jQuery(function(){return new TaxSettings(jigoshop_admin_taxes)});